option_settings:
  aws:elasticbeanstalk:application:environment:
    # Database Configuration
    # MONGODB_URI: will be set via EB environment variables
    # DB_NAME: will be set via EB environment variables
    
    # Security Configuration  
    # JWT_SECRET: will be set via EB environment variables
    # JWT_EXPIRES_IN: will be set via EB environment variables
    
    # External Services
    # CLOUDINARY_CLOUD_NAME: will be set via EB environment variables
    # CLOUDINARY_API_KEY: will be set via EB environment variables
    # CLOUDINARY_API_SECRET: will be set via EB environment variables
    # GEMINI_API_KEY: will be set via EB environment variables
    
    # Server Configuration
    PORT: 5000
    NODE_ENV: production
    
  # Enable log file rotation and retention
  aws:elasticbeanstalk:cloudwatch:logs:
    StreamLogs: true
    DeleteOnTerminate: false
    RetentionInDays: 7
    
  # Security configurations
  aws:elasticbeanstalk:environment:proxy:
    ProxyServer: nginx
    
  # Health check configuration
  aws:elasticbeanstalk:application:
    Application Healthcheck URL: /api/health
    
  # Load balancer configuration
  aws:elasticbeanstalk:environment:
    LoadBalancerType: application
    
  aws:elbv2:loadbalancer:
    IdleTimeout: 60
    
  aws:elbv2:listener:443:
    Protocol: HTTPS
    SSLCertificateArns: arn:aws:acm:region:account:certificate/certificate-id
    
files:
  "/opt/elasticbeanstalk/tasks/taillogs.d/nodejs-app.conf":
    mode: "000644"
    owner: root
    group: root
    content: |
      /var/log/nodejs/nodejs.log